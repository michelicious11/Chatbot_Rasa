version: "3.1"

rules:

  - rule: Say Hello
    steps:
    - intent: greet
    - action: utter_greet

  - rule: Say Goodbye
    steps:
    - intent: bye
    - action: utter_goodbye
    - action: action_save_convo

  - rule: Say 'I am a bot'
    steps:
    - intent: bot_challenge
    - action: utter_iamabot
    - action: action_save_convo

  - rule: out of scope
    steps:
    - intent: outofscope
    - action: utter_outofscope
    - action: action_save_convo
    
  - rule: Ask about faq
    steps:
    - intent: faq
    - action: utter_faq
    - action: utter_feedback
    - action: action_save_convo


  - rule: Activate contact us form
    condition:
    - active_loop: null
    steps:
    - intent: contact_us
    - action: contact_us_form
    - active_loop: contact_us_form

  - rule: Deactivate contact us form
    condition:
    - active_loop: contact_us_form
    steps:
    - action: contact_us_form
    - active_loop: null
    - slot_was_set:
      - requested_slot: null
    - action: action_submit_contact_us_form

  - rule: user said yes
    condition:
    - active_loop: form_enforce_yes_or_no
    steps:
    - action: form_enforce_yes_or_no
    - intent: affirm
    - active_loop: null
    - slot_was_set: 
      - answer: yes
    - action: utter_satisfied
    


  - rule: User said no
    condition:
    - active_loop: form_enforce_yes_or_no
    steps:
    - action: form_enforce_yes_or_no
    - intent: deny
    - active_loop: null
    - slot_was_set: 
      - answer: no
    - action: utter_unsatisfied